{"ast":null,"code":"import _defineProperty from\"E:/portfolio/React/et/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/portfolio/React/et/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/portfolio/React/et/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect}from'react';import{Context}from'../context/GlobalState';import validator from'./Validator';import{v4 as uuid4}from'uuid';export var AddTransaction=function AddTransaction(){var initState={text:'',amount:''};var _React$useContext=React.useContext(Context),dispatch=_React$useContext.dispatch;var _React$useState=React.useState(initState),_React$useState2=_slicedToArray(_React$useState,2),formData=_React$useState2[0],setFormData=_React$useState2[1];var _React$useState3=React.useState(formData),_React$useState4=_slicedToArray(_React$useState3,2),err=_React$useState4[0],setError=_React$useState4[1];var onchangeHandle=function onchangeHandle(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var data={// id: Math.floor(Math.random() * 1000 * 100000),\nid:uuid4(),text:formData.text,amount:+formData.amount,date:new Date().toLocaleString()};// console.log( (Date.now()).toLocaleString())\nvar onSubmitHandler=function onSubmitHandler(e){e.preventDefault();setError(validator(formData));};useEffect(function(){if(Object.keys(err).length===0){setFormData(initState);dispatch({type:'AddItem',AddTransanction:data});}},[err]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add new transaction\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,id:\"reset\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",children:\"Text\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter text...\",onChange:onchangeHandle,name:\"text\",value:formData.text}),err.text&&/*#__PURE__*/_jsxs(\"span\",{className:\"error\",children:[err.text,\"  \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"amount\",children:[\"Amount \",/*#__PURE__*/_jsx(\"br\",{}),\"(negative - expense, positive + income)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Enter amount...\",onChange:onchangeHandle,name:\"amount\",value:formData.amount}),err.amount&&/*#__PURE__*/_jsxs(\"span\",{className:\"error\",children:[err.amount,\"  \"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn\",value:\"Add Transaction\"})]})]});};","map":{"version":3,"sources":["E:/portfolio/React/et/src/components/AddTransaction.jsx"],"names":["React","useEffect","Context","validator","v4","uuid4","AddTransaction","initState","text","amount","useContext","dispatch","useState","formData","setFormData","err","setError","onchangeHandle","e","target","name","value","data","id","date","Date","toLocaleString","onSubmitHandler","preventDefault","Object","keys","length","type","AddTransanction"],"mappings":"kjBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAASC,EAAE,GAAIC,CAAAA,KAAf,KAA4B,MAA5B,CAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAClC,GAAMC,CAAAA,SAAS,CAAG,CAChBC,IAAI,CAAE,EADU,CAEhBC,MAAM,CAAE,EAFQ,CAAlB,CADkC,sBAKbT,KAAK,CAACU,UAAN,CAAiBR,OAAjB,CALa,CAK1BS,QAL0B,mBAK1BA,QAL0B,qBAMFX,KAAK,CAACY,QAAN,CAAeL,SAAf,CANE,oDAM3BM,QAN2B,qBAMjBC,WANiB,0CAOVd,KAAK,CAACY,QAAN,CAAeC,QAAf,CAPU,qDAO3BE,GAP2B,qBAOtBC,QAPsB,qBASlC,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAO,CAC5BJ,WAAW,gCACND,QADM,wBAERK,CAAC,CAACC,MAAF,CAASC,IAFD,CAEQF,CAAC,CAACC,MAAF,CAASE,KAFjB,GAAX,CAID,CALD,CAOA,GAAMC,CAAAA,IAAI,CAAG,CACX;AACAC,EAAE,CAAElB,KAAK,EAFE,CAGXG,IAAI,CAAEK,QAAQ,CAACL,IAHJ,CAIXC,MAAM,CAAE,CAACI,QAAQ,CAACJ,MAJP,CAKXe,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAD,CAAaC,cAAb,EALK,CAAb,CAQA;AAGA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACT,CAAD,CAAO,CAC7BA,CAAC,CAACU,cAAF,GACAZ,QAAQ,CAACb,SAAS,CAACU,QAAD,CAAV,CAAR,CACD,CAHD,CAKAZ,SAAS,CAAC,UAAM,CACd,GAAI4B,MAAM,CAACC,IAAP,CAAYf,GAAZ,EAAiBgB,MAAjB,GAA4B,CAAhC,CAAmC,CACjCjB,WAAW,CAACP,SAAD,CAAX,CACAI,QAAQ,CAAC,CAAEqB,IAAI,CAAE,SAAR,CAAmBC,eAAe,CAAEX,IAApC,CAAD,CAAR,CAGD,CACF,CAPQ,CAON,CAACP,GAAD,CAPM,CAAT,CASA,mBACE,wCACE,2CADF,cAEE,cAAM,QAAQ,CAAEY,eAAhB,CAAiC,EAAE,CAAC,OAApC,wBACE,aAAK,SAAS,CAAC,cAAf,wBACE,cAAO,OAAO,CAAC,MAAf,kBADF,cAGE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,eAFd,CAGE,QAAQ,CAAEV,cAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAEJ,QAAQ,CAACL,IALlB,EAHF,CAUGO,GAAG,CAACP,IAAJ,eAAY,cAAM,SAAS,CAAC,OAAhB,WAAyBO,GAAG,CAACP,IAA7B,QAVf,GADF,cAcE,aAAK,SAAS,CAAC,cAAf,wBACE,eAAO,OAAO,CAAC,QAAf,kCAA+B,aAA/B,6CADF,cAKE,cACE,IAAI,CAAC,QADP,CAEE,WAAW,CAAC,iBAFd,CAGE,QAAQ,CAAES,cAHZ,CAIE,IAAI,CAAC,QAJP,CAKE,KAAK,CAAEJ,QAAQ,CAACJ,MALlB,EALF,CAaGM,GAAG,CAACN,MAAJ,eAAc,cAAM,SAAS,CAAC,OAAhB,WAAyBM,GAAG,CAACN,MAA7B,QAbjB,GAdF,cA6BE,cAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAC,KAA/B,CAAqC,KAAK,CAAC,iBAA3C,EA7BF,GAFF,GADF,CAoCD,CA7EM","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Context } from '../context/GlobalState'\r\nimport validator from './Validator';\r\nimport { v4 as uuid4 } from 'uuid'\r\n\r\nexport const AddTransaction = () => {\r\n  const initState = {\r\n    text: '',\r\n    amount: '',\r\n  }\r\n  const { dispatch } = React.useContext(Context)\r\n  const [formData, setFormData] = React.useState(initState);\r\n  const [err, setError] = React.useState(formData)\r\n\r\n  const onchangeHandle = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  const data = {\r\n    // id: Math.floor(Math.random() * 1000 * 100000),\r\n    id: uuid4(),\r\n    text: formData.text,\r\n    amount: +formData.amount,\r\n    date: (new Date()).toLocaleString(),\r\n  }\r\n\r\n  // console.log( (Date.now()).toLocaleString())\r\n\r\n\r\n  const onSubmitHandler = (e) => {\r\n    e.preventDefault()\r\n    setError(validator(formData))\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(err).length === 0) {\r\n      setFormData(initState);\r\n      dispatch({ type: 'AddItem', AddTransanction: data });\r\n      \r\n      \r\n    }\r\n  }, [err])\r\n\r\n  return (\r\n    <>\r\n      <h3>Add new transaction</h3>\r\n      <form onSubmit={onSubmitHandler} id=\"reset\">\r\n        <div className=\"form-control\">\r\n          <label htmlFor=\"text\">Text</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter text...\"\r\n            onChange={onchangeHandle}\r\n            name=\"text\"\r\n            value={formData.text}\r\n          />\r\n          {err.text && <span className=\"error\">{err.text}  </span>}\r\n        </div>\r\n\r\n        <div className=\"form-control\">\r\n          <label htmlFor=\"amount\">Amount <br />\r\n            (negative - expense, positive + income)\r\n          </label>\r\n\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Enter amount...\"\r\n            onChange={onchangeHandle}\r\n            name=\"amount\"\r\n            value={formData.amount}\r\n\r\n          />\r\n          {err.amount && <span className=\"error\">{err.amount}  </span>}\r\n        </div>\r\n        <input type=\"submit\" className=\"btn\" value=\"Add Transaction\" />\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}